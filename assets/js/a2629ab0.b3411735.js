"use strict";(self.webpackChunkczertainly=self.webpackChunkczertainly||[]).push([[7227],{91803:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return r},default:function(){return u},frontMatter:function(){return s},metadata:function(){return o},toc:function(){return c}});var a=n(85893),i=n(11151);const s={},r="Request Metadata",o={id:"signing/ades-formats/request-metadata",title:"Request Metadata",description:"Request metadata is used to control the signing process for the AdES signature formats.",source:"@site/docs/30-signing/05-ades-formats/25-request-metadata.md",sourceDirName:"30-signing/05-ades-formats",slug:"/signing/ades-formats/request-metadata",permalink:"/docs/signing/ades-formats/request-metadata",draft:!1,unlisted:!1,editUrl:"https://github.com/3KeyCompany/CZERTAINLY-Documentation/edit/documentation/docs/30-signing/05-ades-formats/25-request-metadata.md",tags:[],version:"current",sidebarPosition:25,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Sample Properties",permalink:"/docs/signing/ades-formats/signature-augmentation/sample-properties"},next:{title:"Hash Signing",permalink:"/docs/signing/ades-formats/hash-signing"}},d={},c=[{value:"<code>RETURN_DTBS_ONLY</code>",id:"return_dtbs_only",level:2},{value:"B-level attributes",id:"b-level-attributes",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"request-metadata",children:"Request Metadata"}),"\n",(0,a.jsx)(t.p,{children:"Request metadata is used to control the signing process for the AdES signature formats.\nThe following document describes available metadata fields that can be specified.\nAny request that does not contain any of the following metadata is considered to be a normal signing operation as defined by the SignServer framework."}),"\n",(0,a.jsx)(t.h2,{id:"return_dtbs_only",children:(0,a.jsx)(t.code,{children:"RETURN_DTBS_ONLY"})}),"\n",(0,a.jsxs)(t.p,{children:["When you need to split the signing process into two steps, you can use the ",(0,a.jsx)(t.code,{children:"RETURN_DTBS_ONLY=true"})," metadata to indicate that the Signer should only return the Data To Be Signed (DTBS). In this case Signer returns only formatted data to be signed of the uploaded data and not the signed data. The private key is not used in this case."]}),"\n",(0,a.jsx)(t.p,{children:"Using this metadata, the Signer will respond with the JSON with the following structure:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n  "dtbs": "Base64 encoded data to be signed, formatted according the Signer\'s format",\n  "digestAlgorithm": "Digest algorithm specified for the Signer"\n}\n'})}),"\n",(0,a.jsx)(t.p,{children:"Returned DTBS data can be used further by the external application or system to authorize signing process and to generate signature activation data that are used to activate the private key and to sign the data as the second step."}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"RETURN_DTBS_ONLY"})," metadata is only supported for the Signers that provide deterministic data to be signed. This restriction is applied to be able to guarantee that the signature activation data contains the same data to be signed and the signing process can be finished in the second step. Without deterministic behaviour, the signature process will fail."]})}),"\n",(0,a.jsx)(t.h2,{id:"b-level-attributes",children:"B-level attributes"}),"\n",(0,a.jsx)(t.p,{children:"The B-level signed attributes can be controlled using the request metadata fields.\nWhen the B-level property is present in the request metadata, it will override the value configured in the Signer."}),"\n",(0,a.jsxs)(t.p,{children:["See ",(0,a.jsx)(t.a,{href:"./common-properties/blevel-properties",children:"B-level Properties"})," for the list of all available B-level properties."]}),"\n",(0,a.jsx)(t.p,{children:"The request metadata should contain the name of the B-level property and the value, for example:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-properties",children:"TRUST_ANCHOR_BP_POLICY_ENABLED=false\nSIGNING_DATE=1647880945450\n"})})]})}function u(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},11151:function(e,t,n){n.d(t,{Z:function(){return o},a:function(){return r}});var a=n(67294);const i={},s=a.createContext(i);function r(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);