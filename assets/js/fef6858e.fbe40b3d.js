"use strict";(self.webpackChunkczertainly=self.webpackChunkczertainly||[]).push([[7444],{69868:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>g});var a=n(85893),i=n(11151);const s={},o="Signature Augmentation",r={id:"signing/ades-formats/signature-augmentation/overview",title:"Signature Augmentation",description:"Signature augmentation is the process of extending existing signature to a higher Baseline. The augmentation typically extends the B-B or B-T signature by adding additional validation material and timestamps which eventually extend the validity of the signature. The augmentation process is necessary to achieve longer period of validity of signed data (for example for digital archives).",source:"@site/docs/30-signing/05-ades-formats/24-signature-augmentation/01-overview.md",sourceDirName:"30-signing/05-ades-formats/24-signature-augmentation",slug:"/signing/ades-formats/signature-augmentation/overview",permalink:"/docs/signing/ades-formats/signature-augmentation/overview",draft:!1,unlisted:!1,editUrl:"https://github.com/3KeyCompany/CZERTAINLY-Documentation/edit/documentation/docs/30-signing/05-ades-formats/24-signature-augmentation/01-overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ASiC Signer Sample Configuration",permalink:"/docs/signing/ades-formats/asic-signer/asic-sample"},next:{title:"AdES Augmentors",permalink:"/docs/signing/ades-formats/signature-augmentation/augmentors"}},d={},g=[{value:"Process of augmentation",id:"process-of-augmentation",level:2},{value:"Augmentation properties",id:"augmentation-properties",level:2},{value:"Detached contents in batch augmentation",id:"detached-contents-in-batch-augmentation",level:3}];function u(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"signature-augmentation",children:"Signature Augmentation"}),"\n",(0,a.jsx)(t.p,{children:"Signature augmentation is the process of extending existing signature to a higher Baseline. The augmentation typically extends the B-B or B-T signature by adding additional validation material and timestamps which eventually extend the validity of the signature. The augmentation process is necessary to achieve longer period of validity of signed data (for example for digital archives)."}),"\n",(0,a.jsx)(t.p,{children:"Only existing Baseline-B signature can be extended. The B-B signature contains signed attributes that cannot be changed further without breaking the integrity of the signature. Once the B-B signature exists, it can be extended to any of the B-T, B-LT, or B-LTA signature level without having access to the signers private key. Depending on the augmentation level, validation data and/or new timestamps are included in the signature unsigned attributes."}),"\n",(0,a.jsxs)(t.p,{children:["The following diagram from the ",(0,a.jsx)(t.strong,{children:"ETSI EN 319 102-1"})," shows the building blocks of the signature and augmentation:\n",(0,a.jsx)(t.img,{alt:"Signature augmentation process",src:n(21181).Z+"",title:"Signature augmentation process",width:"1938",height:"478"})]}),"\n",(0,a.jsxs)(t.p,{children:["See ",(0,a.jsx)(t.a,{href:"https://www.etsi.org/deliver/etsi_en/319100_319199/31910201/",children:"Electronic Signatures and Trust Infrastructures (ESI); Procedures for Creation and Validation of AdES Digital Signatures; Part 1: Creation and Validation"})," for more information about the augmentation process."]}),"\n",(0,a.jsx)(t.admonition,{title:"Extending validity of signed data",type:"tip",children:(0,a.jsx)(t.p,{children:"The augmentation process needs to be executed on a signature that does not have expired certificates to keep the validation chain valid in time. New timestamp can be added to existing B-LTA signature any time. In such case, also new validation data is added to existing signature that extends the validity of the signature."})}),"\n",(0,a.jsx)(t.h2,{id:"process-of-augmentation",children:"Process of augmentation"}),"\n",(0,a.jsx)(t.p,{children:"Only valid signatures can be augmented. Therefore, the first step during the augmentation is to validate the existing signature. If the signature is not valid, the augmentation will fail. In case the validation of detached signatures, the original data needs to be provided for the augmentation as well to validate the signature."}),"\n",(0,a.jsx)(t.p,{children:"You can augment from any Baseline signature level up to LTA, and you can repeat the LTA augmentation to achieve longer validity of the signature. The augmentation process is always iterative. When you would like to augment B-B to B-LTA, the process will first augment existing B-B signature to B-T, then to B-LT, and eventually to B-LTA."}),"\n",(0,a.jsx)(t.h2,{id:"augmentation-properties",children:"Augmentation properties"}),"\n",(0,a.jsxs)(t.p,{children:["The augmentation properties are same as the signature properties but do not require ",(0,a.jsx)(t.code,{children:"CRYPTOTOKEN"})," to be configured because the augmentation extends only existing signature that was created."]}),"\n",(0,a.jsxs)(t.p,{children:["Also, ",(0,a.jsx)(t.a,{href:"../common-properties/blevel-properties",children:"B-level propeties"})," are not applicable for the augmentation as they are contained in signed attributes of B-B signature."]}),"\n",(0,a.jsx)(t.p,{children:"Properties for collecting of validation material from trusted sources and TSA properties must be set for the augmentation."}),"\n",(0,a.jsxs)(t.p,{children:["The data that needs to be provide for validation of detached signatures should be included as a Base64 encoded original data in the ",(0,a.jsx)(t.code,{children:"DETACHED_CONTENTS"})," metadata when requesting for the augmentation."]}),"\n",(0,a.jsx)(t.h3,{id:"detached-contents-in-batch-augmentation",children:"Detached contents in batch augmentation"}),"\n",(0,a.jsxs)(t.p,{children:["When augmenting detached signatures in batch, the original data should be provided in the ",(0,a.jsx)(t.code,{children:"detachedContens"})," field. The original data should be Base64 encoded and the field should be included in the request for each signature that is being augmented."]}),"\n",(0,a.jsx)(t.p,{children:"An example of the batch augmentation request with detached contents is following:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n  "signatureRequests": [\n    {\n      "data": "base64signature1",\n      "customIdentifier": "signature 1",\n      "detachedContents": "base64detachedContents1"\n    },\n    {\n      "data": "base64signature2",\n      "customIdentifier": "signature 2",\n      "detachedContents": "base64detachedContents2"\n    }\n  ]\n}\n'})}),"\n",(0,a.jsxs)(t.p,{children:["The output of the batch augmentation will be the same as the output for batch signing, with the augmented signatures. See ",(0,a.jsx)(t.a,{href:"../batch-signing#batch-signing-response-format",children:"Batch signing request format"})," for more information."]})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},21181:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/augmentation-d62f44d4170b09ebb5e01f8ba158602f.png"},11151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>o});var a=n(67294);const i={},s=a.createContext(i);function o(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);