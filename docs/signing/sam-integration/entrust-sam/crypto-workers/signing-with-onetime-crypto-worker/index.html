<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-signing/sam-integration/entrust-sam/crypto-workers/signing-with-onetime-crypto-worker">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Signing with Onetime Crypto Worker | CZERTAINLY Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.czertainly.com/docs/signing/sam-integration/entrust-sam/crypto-workers/signing-with-onetime-crypto-worker"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Signing with Onetime Crypto Worker | CZERTAINLY Documentation"><meta data-rh="true" name="description" content="The following chapters describe the signing flow using the EntrustSAMOneTimeCryptoWorker. The same process is applicable for any type of the Signer configured."><meta data-rh="true" property="og:description" content="The following chapters describe the signing flow using the EntrustSAMOneTimeCryptoWorker. The same process is applicable for any type of the Signer configured."><link data-rh="true" rel="icon" href="/img/czertainly_sign_color.svg"><link data-rh="true" rel="canonical" href="https://www.czertainly.com/docs/signing/sam-integration/entrust-sam/crypto-workers/signing-with-onetime-crypto-worker"><link data-rh="true" rel="alternate" href="https://www.czertainly.com/docs/signing/sam-integration/entrust-sam/crypto-workers/signing-with-onetime-crypto-worker" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.czertainly.com/docs/signing/sam-integration/entrust-sam/crypto-workers/signing-with-onetime-crypto-worker" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9LVBEQBLSX-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="CZERTAINLY Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.eaf24104.css">
<link rel="preload" href="/assets/js/runtime~main.f4403049.js" as="script">
<link rel="preload" href="/assets/js/main.e2b3bb8b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/czertainly_sign_color.svg" alt="CZERTAINLY Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/czertainly_sign_white.svg" alt="CZERTAINLY Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">CZERTAINLY Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Core API</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/api/core-acme/">ACME</a></li><li><a class="dropdown__link" href="/api/core-auth/">Auth</a></li><li><a class="dropdown__link" href="/api/core-authority/">Authority</a></li><li><a class="dropdown__link" href="/api/core-certificate/">Certificate</a></li><li><a class="dropdown__link" href="/api/core-client-operations/">Client Operations</a></li><li><a class="dropdown__link" href="/api/core-compliance-profile/">Compliance Profile</a></li><li><a class="dropdown__link" href="/api/core-connector/">Connector</a></li><li><a class="dropdown__link" href="/api/core-credential/">Credential</a></li><li><a class="dropdown__link" href="/api/core-cryptographic-operations/">Cryptographic Operations</a></li><li><a class="dropdown__link" href="/api/core-custom-attributes/">Custom Attributes</a></li><li><a class="dropdown__link" href="/api/core-discovery/">Discovery</a></li><li><a class="dropdown__link" href="/api/core-entity/">Entity</a></li><li><a class="dropdown__link" href="/api/core-group/">Group</a></li><li><a class="dropdown__link" href="/api/core-key/">Key</a></li><li><a class="dropdown__link" href="/api/core-local/">Local</a></li><li><a class="dropdown__link" href="/api/core-location/">Location</a></li><li><a class="dropdown__link" href="/api/core-ra-profile/">RA Profile</a></li><li><a class="dropdown__link" href="/api/core-other/">Other</a></li><li><a class="dropdown__link" href="/api/core-token/">Token</a></li><li><a class="dropdown__link" href="/api/core-token-profile/">Token Profile</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Connector API</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/api/connector-authority-provider-legacy/">Authority Provider Legacy</a></li><li><a class="dropdown__link" href="/api/connector-authority-provider-v2/">Authority Provider v2</a></li><li><a class="dropdown__link" href="/api/connector-compliance-provider/">Compliance Provider</a></li><li><a class="dropdown__link" href="/api/connector-credential-provider/">Credential Provider</a></li><li><a class="dropdown__link" href="/api/connector-cryptography-provider/">Cryptography Provider</a></li><li><a class="dropdown__link" href="/api/connector-discovery-provider/">Discovery Provider</a></li><li><a class="dropdown__link" href="/api/connector-entity-provider/">Entity Provider</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Protocol API</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/api/protocol-acme/">ACME</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/3KeyCompany/CZERTAINLY/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link pseudo-icon github-icon"></a><a href="https://discord.gg/XYsSZKjSt4" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link pseudo-icon discord-icon"></a><a href="https://www.czertainly.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About CZERTAINLY<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/certificate-key/introduction">Certificates and Cryptographic Keys</a><button aria-label="Toggle the collapsible sidebar category &#x27;Certificates and Cryptographic Keys&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/signing/introduction">Digital Signing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Digital Signing&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/ades-formats/overview">AdES Signature Formats</a><button aria-label="Toggle the collapsible sidebar category &#x27;AdES Signature Formats&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/ades-validation/overview">AdES Signature Validation</a><button aria-label="Toggle the collapsible sidebar category &#x27;AdES Signature Validation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/saml-authorizer/overview">SAML 2.0 Authorizer</a><button aria-label="Toggle the collapsible sidebar category &#x27;SAML 2.0 Authorizer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/extended-jws-authorizer/overview">Extended JWS Authorizer</a><button aria-label="Toggle the collapsible sidebar category &#x27;Extended JWS Authorizer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/qscd-integration/overview">QSCD Integration</a><button aria-label="Toggle the collapsible sidebar category &#x27;QSCD Integration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/signing/sam-integration/overview">SAM Integration</a><button aria-label="Toggle the collapsible sidebar category &#x27;SAM Integration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/signing/sam-integration/scal">Sole Control Assurance Level</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/signing/sam-integration/sam-cryptotoken">SAM Crypto Token</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/overview">Entrust SAM</a><button aria-label="Toggle the collapsible sidebar category &#x27;Entrust SAM&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/properties">Entrust SAM Crypto Token Properties</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/crypto-workers/basic-crypto-worker">Entrust SAM Crypto Workers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/crypto-workers/basic-crypto-worker">Basic Crypto Worker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/crypto-workers/onetime-crypto-worker">OneTime Crypto Worker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/crypto-workers/signing-with-onetime-crypto-worker">Signing with Onetime Crypto Worker</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/sad-providers/overview">SAD Providers</a><button aria-label="Toggle the collapsible sidebar category &#x27;SAD Providers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/dynamic-config-signer-properties">Dynamic Configuration Signer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/signing/sam-integration/entrust-sam/samples/sample-configuration">Samples</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/sam-integration/trident-sam/overview">Trident SAM</a><button aria-label="Toggle the collapsible sidebar category &#x27;Trident SAM&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/aws-kms-cryptotoken/overview">AWS KMS CryptoToken</a><button aria-label="Toggle the collapsible sidebar category &#x27;AWS KMS CryptoToken&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/cert-storage-providers/overview">Certificate Storage Providers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Certificate Storage Providers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/signing/upgrade-information/overview">Upgrade Information</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrade Information&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/feedback-support">Feedback and Support</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/contributors/overview">Contributors</a><button aria-label="Toggle the collapsible sidebar category &#x27;Contributors&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/community/overview">Community</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/signing/introduction"><span itemprop="name">Digital Signing</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/signing/sam-integration/overview"><span itemprop="name">SAM Integration</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/signing/sam-integration/entrust-sam/overview"><span itemprop="name">Entrust SAM</span></a><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Entrust SAM Crypto Workers</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Signing with Onetime Crypto Worker</span><meta itemprop="position" content="5"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Signing with Onetime Crypto Worker</h1><p>The following chapters describe the signing flow using the <code>EntrustSAMOneTimeCryptoWorker</code>. The same process is applicable for any type of the Signer configured.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="signing-process">Signing process<a href="#signing-process" class="hash-link" aria-label="Direct link to Signing process" title="Direct link to Signing process">​</a></h2><p>The signing process starts with the request coming to Signer to process and return the signature. It can be any of the supported signature formats.</p><p>The user must be properly identified and authorized to generate unique onetime SAM key. The signing process is synchronous. If some step during the signing process fails, the SAM private key is destroyed and the operation is reported as failed.</p><p>The signing process has 2 subprocesses that are described in more detail below:</p><ul><li><a href="#prepare-sam-key-data"><strong>Prepare SAM key data</strong></a></li><li><a href="#activate-sam-key-and-sign"><strong>Activate SAM key and sign</strong></a></li></ul><p><object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/dLDDImD13BtxAm9UAgWeKWGFObjRyE07jE1vt8bjsDrCpMGK5V-xcQskbMh5xiBEBdbvILxU0W2SHNMYgQwsx0DYIJntucg8-92G2uJN9f2ldaXu6eGg26mVTe-F-jslKA51-a4yoi-0zkN6gb51SyUw3hyCSqKvbP3OVq27XwFky62L-Yeehe17n_bkC6_DqoKDdEexb3PnK16omjufZ6dAA2VDIJm5oIf4_LO2XAOpXN3VeYSpX1HHW2AGDogw9_JWsETgio3qWhxbM6JbQaDMIL77lSjhnWdLE93dkORR86McxHKFYGH1ZNuHWKaeaN_fvW-s6q7RB8B5eSHdy4vToxGs5_QMb5bk12xOt6Cc-M6sJ_meIEsqgGQMTuSGSyH3vtpI7-_yNvKCX9oxcGpcL7fq-gL3tb9kQGCjykaqoThvYLrb-s-s-35w8qQ7kAYIju2LC1dhUTmrlps6mYa5Ra2xW5hihufa_0lFBZirfcfXr3DaRp_qEm00"></object></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-sam-key-data">Prepare SAM key data<a href="#prepare-sam-key-data" class="hash-link" aria-label="Direct link to Prepare SAM key data" title="Direct link to Prepare SAM key data">​</a></h3><p>This process consists of generating, assigning, and certifying the SAM key that is should be authorized to be used on behalf of the user.</p><p>When the SAM key is generated, it must be certified. This consists of providing the proof of possession in the form of the CSR to certification authority. How is the certificate requested and issued depends on the implementation of CA Connector identified by <code>CA_CONNECTOR_IMPLEMENTATION_CLASS</code> property of the <code>EntrustSAMOneTimeCryptoWorker</code>.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Out-of-the-box implementation of the EJBCA connector using Web Services can be used with the SAM crypto worker. The implementation class for this CA connector is <code>CA_CONNECTOR_IMPLEMENTATION_CLASS=com.czertainly.signserver.module.sam.onetime.caconnector.EjbcaWSSAMCAConnector</code>. It is expected that this implementation will be moved to generic package in the future release. The configuration properties are same as in case <a href="https://doc.primekey.com/signserver/signserver-operations/setting-up-one-time-keys#SettingupOnetimeKeys-EJBCAWSCAConnector" target="_blank" rel="noopener noreferrer">EJBCA WS CA Connector</a></p></div></div><p><object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/fPDDJy9048Rl_ee9NZIHH6882GT3gM0y-14nyRos0svAPzRPBOGO_xkpG4024j2swTS--yuxCxi001qVZ8Ig79_e1_Z2aZDYIl3uKI5b29_pWNWa8ZnDUSm2furcwwhRN0zbWQNBagFi1bOlJnhDPjOP2lludvZ9Yf5mHVaIxJNwpTxbjlG31zo2-wrupfcl-TrKWQagtr1M4tiKfF9XaDm_4hxO4bEPkS2lB0KArA-XjYH0aLeRRf5GJ40mb8Fnteu82ATGu0oSiMlXZNbGLwMzeTgHcwla9fW_snj4F-dWMQs10IVCGz3BiVUePfd-uK-bJQW43pUN9csuyxv2o51xEhIPLcwZPy0JHVSANKIL6tH8kGSc2Ey8jdHZB9622PfJp31D86KYZ8jn5K5_7f1OkiFRiNNNJM0dSLauMJnZ9yyMMS_EVolwyMkYerNG3ViD"></object></p><p>As a result of this process, the SAM key data are ready to be activated and used to generate a digital signature on behalf of the user that owns the SAM key.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="activate-sam-key-and-sign">Activate SAM key and sign<a href="#activate-sam-key-and-sign" class="hash-link" aria-label="Direct link to Activate SAM key and sign" title="Direct link to Activate SAM key and sign">​</a></h3><p>Once the data to be signed (DTBS) and SAM key is ready, the process of activation the SAM key and signing on behalf of the user can be executed.</p><p>For that we need to get Signature Activation Data (SAD) which represents the explicit authorization from the user to sign the DTBS and can be used to generate the digital signature. How is the SAD obtained depends on the implementation of the SAD Provider and it can be configured using the <code>SAD_PROVIDER_IMPLEMENTATION_CLASS</code> of the underlying <code>CRYPTOTOKEN</code> of the <code>EntrustSAMOneTimeCryptoWorker</code>. See <a href="/docs/signing/sam-integration/entrust-sam/sad-providers/overview">SAD Providers</a> for more information.</p><p><object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/ZL9DImCn4BtxAuPwKR1WaLBeGVhjgLgiu3dTdMv3TpFhP58HyRyxMSksjLARG4YOD-_DUmG0eEV5i8GYlz07-BLrfM5JWCUtW2v1-AmASVMPwNr8EJ5SjjgTkq5xLqg4U42S8lyDg2ypLRE9BOsJK_Xzc4dM6LDmwHOwRatQuzjZwaSIF09FEd5NcA_gD478XMA1N3UEdN3mCkzFdno-s0A7_54AlHAlaQ5v3urvVmGpfetLWHjTU8xXU86vpPoHm1W3i1iZbXoCZ1YuqexhWyc0DafsKkhcjyu8ItIf1sML5O8joXmBTF8ZH4lOnzTgXopGL0CdPRjd-_W_g2r21vlg_0_ea8rwJsrcnUJWQo4LME3AvCje8tXj3zwwB3hQ6TbdYpxEDr9nz3Gy_TdV"></object></p><p>The digital signature is eventually obtained from Entrust SAM and returned back to the Signer.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="typical-setup-of-onetime-signing">Typical setup of onetime signing<a href="#typical-setup-of-onetime-signing" class="hash-link" aria-label="Direct link to Typical setup of onetime signing" title="Direct link to Typical setup of onetime signing">​</a></h2><p>To make the onetime signing work, we typically need the following component workers to be properly configured and activated:</p><ul><li>EntrustSAMCryptoToken - source crypto token for managing SAM keys</li><li>EntrustSAMOneTimeCryptoWorker - managing the onetime SAM keys lifecycle</li><li>Signer - format of DTBS and execution of the signing process</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>External components like certification authority and SAD provider should be available and are not further discussed in this document. Refer to the installation and configuration guide of these components for details.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entrustsamcryptotoken">EntrustSAMCryptoToken<a href="#entrustsamcryptotoken" class="hash-link" aria-label="Direct link to EntrustSAMCryptoToken" title="Direct link to EntrustSAMCryptoToken">​</a></h3><p>For more information about the <code>EntrustSAMCryptoToken</code>, refer to <a href="/docs/signing/sam-integration/entrust-sam/properties">Entrust SAM Crypto Token Properties</a> and <a href="/docs/signing/sam-integration/entrust-sam/crypto-workers/basic-crypto-worker">Basic Crypto Worker</a>.</p><p>The following is a sample configuration of the <code>EntrustSAMCryptoToken</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ENTRUST_CONNECTION_POOL_SIZE=20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SAD_PROVIDER_PASSWORD=password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SAD_PROVIDER_URL=http://host.docker.internal:8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OTHER_SIGNERS=EntrustSSPUP12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SAD_PROVIDER_AUTH_TYPE=BASIC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME=EntrustSAMCryptoToken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENTRUST_TRUST_SELF_SIGNED=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KEY_ALIAS_SEPARATOR=_____</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DISABLED=FALSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IMPLEMENTATION_CLASS=com.czertainly.signserver.module.entrustsam.EntrustSAMCryptoWorker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SAD_PROVIDER_IMPLEMENTATION_CLASS=com.czertainly.signserver.module.entrustsam.sad.RestSAMSadProvider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENTRUST_CLIENT_AUTHENTICATION_KEY_ALIAS=sspu1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENTRUST_SAM_SERVER=https://127.0.0.1:9572</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TYPE=PROCESSABLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CRYPTOTOKEN_IMPLEMENTATION_CLASS=com.czertainly.signserver.module.entrustsam.EntrustSAMCryptoToken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SAD_PROVIDER_USERNAME=admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entrustsamonetimecryptoworker">EntrustSAMOneTimeCryptoWorker<a href="#entrustsamonetimecryptoworker" class="hash-link" aria-label="Direct link to EntrustSAMOneTimeCryptoWorker" title="Direct link to EntrustSAMOneTimeCryptoWorker">​</a></h3><p>For more information about the <code>EntrustSAMOneTimeCryptoWorker</code>, refer to <a href="/docs/signing/sam-integration/entrust-sam/crypto-workers/onetime-crypto-worker">OneTime Crypto Worker</a>.</p><p>The following is a sample configuration of the <code>EntrustSAMOneTimeCryptoWorker</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TLSCLIENTKEY=ra_signserver_02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CANAME=DemoClientSubCA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUBJECTALTNAME_PATTERN=uri=TID://${TRANSACTION_ID},uri=keyId://${entrustsam.keyid}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EJBCAWSURL=https://host.docker.internal:8453/ejbca</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USERNAME_PATTERN=onetime-${TRANSACTION_ID}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KEYGEN_ALGORITHM=RSA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OTHER_SIGNERS=RA02CryptoTokenP12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME=EntrustSAMOneTimeCryptoTokenWithEJBCA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CA_CONNECTOR_IMPLEMENTATION_CLASS=com.czertainly.signserver.trident.EjbcaWSSAMCAConnector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CRYPTOTOKEN=EntrustSAMCryptoToken</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DISABLED=FALSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IMPLEMENTATION_CLASS=com.czertainly.signserver.module.entrustsam.EntrustSAMOneTimeCryptoWorker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENDENTITYPROFILE=DemoDocumentSigningEndEntityProfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TRUSTSTOREPATH=/opt/primekey/truststore.jks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TRUSTSTORETYPE=JKS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CERTIFICATEPROFILE=DemoDocumentSigningEECertificateProfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TRUSTSTOREPASSWORD=changeit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TYPE=PROCESSABLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KEYGEN_SPECIFICATION=2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CERTSIGNATUREALGORITHM=SHA256WithRSA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUBJECTDN_PATTERN=CN=${AUTHORIZED_USERNAME},UID=${TRANSACTION_ID}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="signer">Signer<a href="#signer" class="hash-link" aria-label="Direct link to Signer" title="Direct link to Signer">​</a></h3><p>The Signer is responsible for the formatting of the signature. Based on your needs, configure available Signer with the following properties:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CRYPTOTOKEN=EntrustSAMOneTimeCryptoTokenWithEJBCA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AUTHTYPE=org.signserver.server.UsernameAuthorizer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROCESSINTRANSACTION=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALIASSELECTOR=org.signserver.server.aliasselectors.AuthorizedUsernameAliasSelector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ACCEPT_ALL_USERNAMES=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROCESSINTRANSACTION=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Because the onetime signing process must run in transaction to secure correct behaviour of the SAM key lifecycle, the Signer must configure the following property:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PROCESSINTRANSACTION=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>The onetime signing operation using the Entrust SAM fails without providing the <code>PROCESSINTRANSACTION=true</code> in the metadata of the signing request. This metadata is used to properly handle the state of the SAM key in the database of the SignServer during the transaction.</p></div></div><p>The following is a sample configuration of PAdES Signer:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CRYPTOTOKEN=EntrustSAMOneTimeCryptoTokenWithEJBCA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AUTHTYPE=org.signserver.server.UsernameAuthorizer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IMPLEMENTATION_CLASS=com.czertainly.signserver.module.pades.signer.PAdESSigner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROCESSINTRANSACTION=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ALIASSELECTOR=org.signserver.server.aliasselectors.AuthorizedUsernameAliasSelector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ACCEPT_ALL_USERNAMES=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SIGNATURE_LEVEL=PAdES-BASELINE-B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TYPE=PROCESSABLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DIGESTALGORITHM=SHA256</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DISABLEKEYUSAGECOUNTER=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME=PAdES-Baseline-B-EntrustSAM-OneTime</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="signing-process-execution">Signing process execution<a href="#signing-process-execution" class="hash-link" aria-label="Direct link to Signing process execution" title="Direct link to Signing process execution">​</a></h2><p>When the configuration is ready, you can request signing through any of the supported interfaces of the SignServer.</p><p>The signing request must contain <code>IS_SIGNING_OPERATION</code> metadata:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">REQUEST_METADATA.IS_SIGNING_OPERATION=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Otherwise only dummy onetime crypto instance of the <code>EntrustSAMOneTimeCryptoWorker</code> will be provided.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/signing/sam-integration/entrust-sam/crypto-workers/onetime-crypto-worker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">OneTime Crypto Worker</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/signing/sam-integration/entrust-sam/sad-providers/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#signing-process" class="table-of-contents__link toc-highlight">Signing process</a><ul><li><a href="#prepare-sam-key-data" class="table-of-contents__link toc-highlight">Prepare SAM key data</a></li><li><a href="#activate-sam-key-and-sign" class="table-of-contents__link toc-highlight">Activate SAM key and sign</a></li></ul></li><li><a href="#typical-setup-of-onetime-signing" class="table-of-contents__link toc-highlight">Typical setup of onetime signing</a><ul><li><a href="#entrustsamcryptotoken" class="table-of-contents__link toc-highlight">EntrustSAMCryptoToken</a></li><li><a href="#entrustsamonetimecryptoworker" class="table-of-contents__link toc-highlight">EntrustSAMOneTimeCryptoWorker</a></li><li><a href="#signer" class="table-of-contents__link toc-highlight">Signer</a></li></ul></li><li><a href="#signing-process-execution" class="table-of-contents__link toc-highlight">Signing process execution</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2018 - 2023 CZERTAINLY s.r.o. Built with Docusaurus</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f4403049.js"></script>
<script src="/assets/js/main.e2b3bb8b.js"></script>
</body>
</html>